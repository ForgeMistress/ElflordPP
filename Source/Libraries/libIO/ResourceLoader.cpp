///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//  ResourceLoader
//
//  The base class for a resource loader.
//
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//  Copyright (c) Project Firestorm 2018
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#include "stdafx.h"
#include "ResourceLoader.h"
#include "ResourceIOErrors.h"
#include "IResourceObject.h"

OPEN_NAMESPACE(Firestorm);

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

LoadResult::LoadResult()
: _resource(nullptr)
{
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

LoadResult::LoadResult(const LoadResult& other)
: _resource(other._resource)
, _error(other._error)
{
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

LoadResult::LoadResult(LoadResult&& other)
: _resource(eastl::move(other._resource))
, _error(eastl::move(other._error))
{

}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

LoadResult::LoadResult(ResourcePtr&& resource)
: _resource(eastl::move(resource))
{
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

LoadResult::LoadResult(const Error& error)
: _resource(nullptr)
, _error(error)
{
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

LoadResult& LoadResult::operator=(LoadResult&& other)
{
	if(this != &other)
	{
		_resource = eastl::move(other._resource);
		_error = eastl::move(other._error);
	}
	return *this;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

LoadResult& LoadResult::operator=(const LoadResult& other)
{
	if(this != &other)
	{
		_resource = other._resource;
		_error = other._error;
	}
	return *this;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

ResourcePtr LoadResult::GetResource() const
{
	return _resource;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

Error LoadResult::GetError() const
{
	return _error;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

bool LoadResult::HasError() const
{
	return _error.GetCode() != nullptr;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//ResourceLoader::ResourceLoader()
//{
//}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//ResourceLoader::~ResourceLoader()
//{
//}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//ResourceLoader::LoadResult ResourceLoader::Load(ResourceMgr*,const ResourceReference&)
//{
//	return FIRE_LOAD_FAIL(ResourceIOErrors::DEFAULT_LOADER, "can not use default loader");
//}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

CLOSE_NAMESPACE(Firestorm);